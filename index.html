<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Food Health Advisor</title>

<style>
    body {
        margin: 0;
        padding: 0;
        background: #0b0f19;
        font-family: "Segoe UI", sans-serif;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .container {
        width: 460px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.06);
        border-radius: 16px;
        box-shadow: 0 0 25px rgba(0, 200, 255, 0.3);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        text-align: center;
        overflow-y: auto;
        max-height: 95vh;
    }

    h1 {
        font-size: 28px;
        color: #00d9ff;
        margin-bottom: 10px;
    }

    p.subtitle {
        font-size: 15px;
        color: #93b8d1;
        margin-bottom: 18px;
    }

    .food-image {
        width: 100%;
        border-radius: 12px;
        margin-bottom: 20px;
        box-shadow: 0 0 12px rgba(0, 200, 255, 0.25);
    }

    .input-group {
        text-align: left;
        margin-bottom: 18px;
    }

    .input-group label {
        font-size: 14px;
        color: #c8d8e6;
        margin-bottom: 6px;
        display: block;
    }

    textarea {
        width: 100%;
        height: 90px;
        padding: 12px;
        border-radius: 8px;
        border: none;
        resize: none;
        background: rgba(255, 255, 255, 0.15);
        color: #fff;
        outline: none;
    }

    textarea:focus {
        box-shadow: 0 0 0 2px #00d9ff;
    }

    button {
        width: 100%;
        padding: 14px;
        font-size: 18px;
        background: #00d9ff;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        color: #000;
        cursor: pointer;
        transition: 0.2s;
        margin-top: 10px;
    }

    button:hover {
        background: #00f3ff;
        transform: scale(1.02);
    }

    #status {
        margin-top: 15px;
        font-size: 14px;
        min-height: 22px;
        color: #ffd166;
    }
</style>
</head>

<body>

<div class="container">
    <h1>Food Health Advisor</h1>
    <p class="subtitle">ì§ˆí™˜ & ìŒì‹ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ë©´ AIê°€ ì˜ì–‘ ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤.</p>

    <!-- ìš”ì²­í•œ ì´ë¯¸ì§€ -->
    <img 
        class="food-image"
        src="https://cdn.edujin.co.kr/news/photo/202305/42084_84601_623.jpg"
        alt="Food Image">

    <!-- Input Section -->
    <div class="input-group">
        <label>í˜„ì¬ ì•“ê³  ìˆëŠ” ì§ˆí™˜ (ì˜ˆ: ê³ í˜ˆì••, ë‹¹ë‡¨, ê³ ì§€í˜ˆì¦)</label>
        <textarea id="disease" placeholder="ì˜ˆ: ê³ í˜ˆì••, ìœ„ì—¼"></textarea>
    </div>

    <div class="input-group">
        <label>ì˜¤ëŠ˜ ë¨¹ì€ ìŒì‹ ê¸°ë¡ (ì˜ˆ: ì‚¼ê²¹ì‚´, ë¼ë©´, ìƒëŸ¬ë“œ ë“±)</label>
        <textarea id="foods" placeholder="ì˜ˆ: ìƒëŸ¬ë“œ, ë‹­ê°€ìŠ´ì‚´, ë¼ë©´"></textarea>
    </div>

    <button onclick="register()">ì˜ì–‘ ë¶„ì„ ìš”ì²­í•˜ê¸°</button>

    <div id="status"></div>
</div>

<script>
async function register() {
    const disease = document.getElementById("disease").value.trim();
    const foods = document.getElementById("foods").value.trim();
    const statusBox = document.getElementById("status");

    if (!disease || !foods) {
        statusBox.textContent = "âš ï¸ ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
        return;
    }

    statusBox.innerHTML = "â³ ì„œë²„ ì‘ë‹µ ëŒ€ê¸° ì¤‘...";

    try {
        const response = await fetch("https://bbd991ec-8f50-4124-9c0a-e8eb409c88bc-00-3jpfyfckweip8.sisko.replit.dev/register", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ disease, foods })
        });

        const result = await response.json();
        console.log("ğŸ“Œ ì„œë²„ ê²°ê³¼:", result); // â† ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œë„ í™•ì¸ ê°€ëŠ¥

        statusBox.innerHTML = `
        <div style="white-space:pre-wrap;text-align:left;margin-top:20px;">
        ğŸ”¥ <b>[AI ë¶„ì„ ê²°ê³¼]</b><br><br>
        ğŸ“ ìœ„í—˜ ë¶„ì„(JSON ì¶œë ¥)<br>${JSON.stringify(result.rule_based, null, 2)}<br><br>
        ğŸ’¡ AI ì‹ë‹¨ í”¼ë“œë°±<br>${result.ai_comment.replace(/\n/g,"<br>")}
        </div>
        `;
        
    } catch (err) {
        console.error(err);
        statusBox.textContent = "âŒ ì˜¤ë¥˜ ë°œìƒ â€” ê²°ê³¼ ìˆ˜ì‹  ì‹¤íŒ¨";
    }
}
</script>
